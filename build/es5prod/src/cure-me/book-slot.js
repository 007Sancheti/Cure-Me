define(["./cure-me.js","./shared/api/ajax-call.js"],function(_cureMe,_ajaxCall){"use strict";function _templateObject3_942974904e2611ea968e0b510ccc7207(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style>\n      :host {\n        display: block;\n        background: linear-gradient(to right, #c9d6ff, #e2e2e2);\n        overflow-y:hidden;\n      }\n        paper-button\n        {\n          width:100%;\n          background:green;\n          color:white;\n        }\n        .slotDate\n        {\n          background:lightseagreen;\n          padding:10px;\n        }\n        #modal\n        {\n          padding:0px 10px;\n        }\n        #cancel\n        {\n          background:red;\n        }\n        #back\n        {\n          background:white;\n          color:black;\n          width:100px;\n          margin-top:10px;\n        }\n        [hidden] {\n          display: none !important;\n        }    \n      </style>\n      <paper-button on-click=\"_handleBack\" id=\"back\" raised>Back</paper-button>\n      <h2>You are Booking appointment for {{doctorName}}</h2>\n      <app-location route=\"{{route}}\"></app-location>\n      <ajax-call id=\"ajax\"></ajax-call>\n      <template is=\"dom-repeat\" items={{slotDetails}}>\n        <p class=\"slotDate\">Slot Date: {{item.slotDate}}</p>\n      <template is=\"dom-repeat\" items={{item.slots}} as=\"slot\">\n      <paper-card heading=\"{{slot.slotTime}}\" image=\"\" elevation=\"1\" animated-shadow=\"false\">\n        <div class=\"card-content\">\n        <p>{{slot.availableStatus}}</p>\n        </div>\n        <div class=\"card-actions\"> \n        <template is=\"dom-if\" if=\"{{_checkAvailability(slot.availableStatus)}}\">\n        <paper-button on-click=\"_handleBook\" data-set$={{item.slotDate}} raised>Book Slot</paper-button> \n        </template>\n        </div>\n      </paper-card>\n      </template>\n      </template>\n      <paper-dialog id=\"modal\">\n      <iron-form id=\"form\" hidden$={{hide}}>\n      <form>\n         <h3 id=\"slotSelected\"></h3>\n          <paper-input id=\"mobileNo\" type=\"text\" maxlength=\"10\" allowed-pattern=[0-9] label=\"Enter Mobile Number\" required\n              error-message=\"Mobile Number is required\">Mobile Number</paper-input>\n          <paper-input label=\"Enter Email ID\" id=\"mail\" required error-message=\"Email ID is required\">Email ID</paper-input>\n          <paper-input label=\"Disease\" id=\"disease\"></paper-input>\n      </form>\n  </iron-form>\n  <div class=\"buttons\" hidden$={{hide}}>\n  <paper-button id=\"cancel\" dialog-dismiss>Cancel</paper-button>\n    <paper-button on-click=\"_handleSubmit\">OK</paper-button>\n  </div>\n  <div hidden$={{!hide}}>\n<h2>{{message}}</h2>\n<paper-button on-click=\"_handleRoute\" raised>Ok</paper-button>\n</div>\n      </paper-dialog>\n      <paper-toast id=\"toast\" text={{message}}></paper-toast>\n    "]);_templateObject3_942974904e2611ea968e0b510ccc7207=function _templateObject3_942974904e2611ea968e0b510ccc7207(){return data};return data}function _templateObject2_942974904e2611ea968e0b510ccc7207(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style include=\"paper-material-styles\">\n      :host {\n        display: inline-block;\n        position: relative;\n        box-sizing: border-box;\n        background-color: var(--paper-card-background-color, var(--primary-background-color));\n        border-radius: 2px;\n\n        @apply --paper-font-common-base;\n        @apply --paper-card;\n      }\n\n      /* IE 10 support for HTML5 hidden attr */\n      :host([hidden]), [hidden] {\n        display: none !important;\n      }\n\n      .header {\n        position: relative;\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n        overflow: hidden;\n\n        @apply --paper-card-header;\n      }\n\n      .header iron-image {\n        display: block;\n        width: 100%;\n        --iron-image-width: 100%;\n        pointer-events: none;\n\n        @apply --paper-card-header-image;\n      }\n\n      .header .title-text {\n        padding: 16px;\n        font-size: 24px;\n        font-weight: 400;\n        color: var(--paper-card-header-color, #000);\n\n        @apply --paper-card-header-text;\n      }\n\n      .header .title-text.over-image {\n        position: absolute;\n        bottom: 0px;\n\n        @apply --paper-card-header-image-text;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n        position:relative;\n\n        @apply --paper-card-content;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n        position:relative;\n\n        @apply --paper-card-actions;\n      }\n\n      :host([elevation=\"1\"]) {\n        @apply --paper-material-elevation-1;\n      }\n\n      :host([elevation=\"2\"]) {\n        @apply --paper-material-elevation-2;\n      }\n\n      :host([elevation=\"3\"]) {\n        @apply --paper-material-elevation-3;\n      }\n\n      :host([elevation=\"4\"]) {\n        @apply --paper-material-elevation-4;\n      }\n\n      :host([elevation=\"5\"]) {\n        @apply --paper-material-elevation-5;\n      }\n    </style>\n\n    <div class=\"header\">\n      <iron-image hidden$=\"[[!image]]\" aria-hidden$=\"[[_isHidden(image)]]\" src=\"[[image]]\" alt=\"[[alt]]\" placeholder=\"[[placeholderImage]]\" preload=\"[[preloadImage]]\" fade=\"[[fadeImage]]\"></iron-image>\n      <div hidden$=\"[[!heading]]\" class$=\"title-text [[_computeHeadingClass(image)]]\">[[heading]]</div>\n    </div>\n\n    <slot></slot>\n"],["\n    <style include=\"paper-material-styles\">\n      :host {\n        display: inline-block;\n        position: relative;\n        box-sizing: border-box;\n        background-color: var(--paper-card-background-color, var(--primary-background-color));\n        border-radius: 2px;\n\n        @apply --paper-font-common-base;\n        @apply --paper-card;\n      }\n\n      /* IE 10 support for HTML5 hidden attr */\n      :host([hidden]), [hidden] {\n        display: none !important;\n      }\n\n      .header {\n        position: relative;\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n        overflow: hidden;\n\n        @apply --paper-card-header;\n      }\n\n      .header iron-image {\n        display: block;\n        width: 100%;\n        --iron-image-width: 100%;\n        pointer-events: none;\n\n        @apply --paper-card-header-image;\n      }\n\n      .header .title-text {\n        padding: 16px;\n        font-size: 24px;\n        font-weight: 400;\n        color: var(--paper-card-header-color, #000);\n\n        @apply --paper-card-header-text;\n      }\n\n      .header .title-text.over-image {\n        position: absolute;\n        bottom: 0px;\n\n        @apply --paper-card-header-image-text;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n        position:relative;\n\n        @apply --paper-card-content;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n        position:relative;\n\n        @apply --paper-card-actions;\n      }\n\n      :host([elevation=\"1\"]) {\n        @apply --paper-material-elevation-1;\n      }\n\n      :host([elevation=\"2\"]) {\n        @apply --paper-material-elevation-2;\n      }\n\n      :host([elevation=\"3\"]) {\n        @apply --paper-material-elevation-3;\n      }\n\n      :host([elevation=\"4\"]) {\n        @apply --paper-material-elevation-4;\n      }\n\n      :host([elevation=\"5\"]) {\n        @apply --paper-material-elevation-5;\n      }\n    </style>\n\n    <div class=\"header\">\n      <iron-image hidden\\$=\"[[!image]]\" aria-hidden\\$=\"[[_isHidden(image)]]\" src=\"[[image]]\" alt=\"[[alt]]\" placeholder=\"[[placeholderImage]]\" preload=\"[[preloadImage]]\" fade=\"[[fadeImage]]\"></iron-image>\n      <div hidden\\$=\"[[!heading]]\" class\\$=\"title-text [[_computeHeadingClass(image)]]\">[[heading]]</div>\n    </div>\n\n    <slot></slot>\n"]);_templateObject2_942974904e2611ea968e0b510ccc7207=function _templateObject2_942974904e2611ea968e0b510ccc7207(){return data};return data}function _templateObject_942974904e2611ea968e0b510ccc7207(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: inline-block;\n        overflow: hidden;\n        position: relative;\n      }\n\n      #baseURIAnchor {\n        display: none;\n      }\n\n      #sizedImgDiv {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        bottom: 0px;\n        left: 0px;\n\n        display: none;\n      }\n\n      #img {\n        display: block;\n        width: var(--iron-image-width, auto);\n        height: var(--iron-image-height, auto);\n      }\n\n      :host([sizing]) #sizedImgDiv {\n        display: block;\n      }\n\n      :host([sizing]) #img {\n        display: none;\n      }\n\n      #placeholder {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        bottom: 0px;\n        left: 0px;\n\n        background-color: inherit;\n        opacity: 1;\n\n        @apply --iron-image-placeholder;\n      }\n\n      #placeholder.faded-out {\n        transition: opacity 0.5s linear;\n        opacity: 0;\n      }\n    </style>\n\n    <a id=\"baseURIAnchor\" href=\"#\"></a>\n    <div id=\"sizedImgDiv\" role=\"img\" hidden$=\"[[_computeImgDivHidden(sizing)]]\" aria-hidden$=\"[[_computeImgDivARIAHidden(alt)]]\" aria-label$=\"[[_computeImgDivARIALabel(alt, src)]]\"></div>\n    <img id=\"img\" alt$=\"[[alt]]\" hidden$=\"[[_computeImgHidden(sizing)]]\" crossorigin$=\"[[crossorigin]]\" on-load=\"_imgOnLoad\" on-error=\"_imgOnError\">\n    <div id=\"placeholder\" hidden$=\"[[_computePlaceholderHidden(preload, fade, loading, loaded)]]\" class$=\"[[_computePlaceholderClassName(preload, fade, loading, loaded)]]\"></div>\n"]);_templateObject_942974904e2611ea968e0b510ccc7207=function _templateObject_942974904e2611ea968e0b510ccc7207(){return data};return data}(0,_cureMe.Polymer)({_template:(0,_cureMe.html)(_templateObject_942974904e2611ea968e0b510ccc7207()),is:"iron-image",properties:{/**
     * The URL of an image.
     */src:{type:String,value:""},/**
     * A short text alternative for the image.
     */alt:{type:String,value:null},/**
     * CORS enabled images support:
     * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image
     */crossorigin:{type:String,value:null},/**
     * When true, the image is prevented from loading and any placeholder is
     * shown.  This may be useful when a binding to the src property is known to
     * be invalid, to prevent 404 requests.
     */preventLoad:{type:Boolean,value:/* ignoreName */ /* ignoreName */ /* ignoreName */ /* ignoreName */!1/* skipSlots */ /* skipSlots */ /* skipSlots */ /* skipSlots */},/**
     * Sets a sizing option for the image.  Valid values are `contain` (full
     * aspect ratio of the image is contained within the element and
     * letterboxed) or `cover` (image is cropped in order to fully cover the
     * bounds of the element), or `null` (default: image takes natural size).
     */sizing:{type:String,value:null,reflectToAttribute:!0/* skipSlots */ /* skipSlots */},/**
     * When a sizing option is used (`cover` or `contain`), this determines
     * how the image is aligned within the element bounds.
     */position:{type:String,value:"center"},/**
     * When `true`, any change to the `src` property will cause the
     * `placeholder` image to be shown until the new image has loaded.
     */preload:{type:Boolean,value:!1},/**
     * This image will be used as a background/placeholder until the src image
     * has loaded.  Use of a data-URI for placeholder is encouraged for instant
     * rendering.
     */placeholder:{type:String,value:null,observer:"_placeholderChanged"},/**
     * When `preload` is true, setting `fade` to true will cause the image to
     * fade into place.
     */fade:{type:Boolean,value:!1},/**
     * Read-only value that is true when the image is loaded.
     */loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
     * Read-only value that tracks the loading state of the image when the
     * `preload` option is used.
     */loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
     * Read-only value that indicates that the last set `src` failed to load.
     */error:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
     * Can be used to set the width of image (e.g. via binding); size may also
     * be set via CSS.
     */width:{observer:"_widthChanged",type:Number,value:null},/**
     * Can be used to set the height of image (e.g. via binding); size may also
     * be set via CSS.
     *
     * @attribute height
     * @type number
     * @default null
     */height:{observer:"_heightChanged",type:Number,value:null}},observers:["_transformChanged(sizing, position)","_loadStateObserver(src, preventLoad)"],created:function created(){this._resolvedSrc=""},_imgOnLoad:function _imgOnLoad(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this._setLoading(!1);this._setLoaded(!0);this._setError(!1)},_imgOnError:function _imgOnError(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";this._setLoading(!1);this._setLoaded(!1);this._setError(!0)},_computePlaceholderHidden:function _computePlaceholderHidden(){return!this.preload||!this.fade&&!this.loading&&this.loaded},_computePlaceholderClassName:function _computePlaceholderClassName(){return this.preload&&this.fade&&!this.loading&&this.loaded?"faded-out":""},_computeImgDivHidden:function _computeImgDivHidden(){return!this.sizing},_computeImgDivARIAHidden:function _computeImgDivARIAHidden(){return""===this.alt?"true":void 0},_computeImgDivARIALabel:function _computeImgDivARIALabel(){if(null!==this.alt){return this.alt}// Polymer.ResolveUrl.resolveUrl will resolve '' relative to a URL x to
// that URL x, but '' is the default for src.
if(""===this.src){return""}// NOTE: Use of `URL` was removed here because IE11 doesn't support
// constructing it. If this ends up being problematic, we should
// consider reverting and adding the URL polyfill as a dev dependency.
var resolved=this._resolveSrc(this.src);// Remove query parts, get file name.
return resolved.replace(/[?|#].*/g,"").split("/").pop()},_computeImgHidden:function _computeImgHidden(){return!!this.sizing},_widthChanged:function _widthChanged(){this.style.width=isNaN(this.width)?this.width:this.width+"px"},_heightChanged:function _heightChanged(){this.style.height=isNaN(this.height)?this.height:this.height+"px"},_loadStateObserver:function _loadStateObserver(src,preventLoad){var newResolvedSrc=this._resolveSrc(src);if(newResolvedSrc===this._resolvedSrc){return}this._resolvedSrc="";this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";if(""===src||preventLoad){this._setLoading(!1);this._setLoaded(!1);this._setError(!1)}else{this._resolvedSrc=newResolvedSrc;this.$.img.src=this._resolvedSrc;this.$.sizedImgDiv.style.backgroundImage="url(\""+this._resolvedSrc+"\")";this._setLoading(!0);this._setLoaded(!1);this._setError(!1)}},_placeholderChanged:function _placeholderChanged(){this.$.placeholder.style.backgroundImage=this.placeholder?"url(\""+this.placeholder+"\")":""},_transformChanged:function _transformChanged(){var sizedImgDivStyle=this.$.sizedImgDiv.style,placeholderStyle=this.$.placeholder.style;sizedImgDivStyle.backgroundSize=placeholderStyle.backgroundSize=this.sizing;sizedImgDivStyle.backgroundPosition=placeholderStyle.backgroundPosition=this.sizing?this.position:"";sizedImgDivStyle.backgroundRepeat=placeholderStyle.backgroundRepeat=this.sizing?"no-repeat":""},_resolveSrc:function _resolveSrc(testSrc){var resolved=(0,_cureMe.resolveUrl)(testSrc,this.$.baseURIAnchor.href);// NOTE: Use of `URL` was removed here because IE11 doesn't support
// constructing it. If this ends up being problematic, we should
// consider reverting and adding the URL polyfill as a dev dependency.
if(2<=resolved.length&&"/"===resolved[0]&&"/"!==resolved[1]){// In IE location.origin might not work
// https://connect.microsoft.com/IE/feedback/details/1763802/location-origin-is-undefined-in-ie-11-on-windows-10-but-works-on-windows-7
resolved=(location.origin||location.protocol+"//"+location.host)+resolved}return resolved}});(0,_cureMe.Polymer)({_template:(0,_cureMe.html)(_templateObject2_942974904e2611ea968e0b510ccc7207()),is:"paper-card",properties:{/**
     * The title of the card.
     */heading:{type:String,value:"",observer:"_headingChanged"},/**
     * The url of the title image of the card.
     */image:{type:String,value:""},/**
     * The text alternative of the card's title image.
     */alt:{type:String},/**
     * When `true`, any change to the image url property will cause the
     * `placeholder` image to be shown until the image is fully rendered.
     */preloadImage:{type:Boolean,value:!1},/**
     * When `preloadImage` is true, setting `fadeImage` to true will cause the
     * image to fade into place.
     */fadeImage:{type:Boolean,value:!1},/**
     * This image will be used as a background/placeholder until the src image
     * has loaded. Use of a data-URI for placeholder is encouraged for instant
     * rendering.
     */placeholderImage:{type:String,value:null},/**
     * The z-depth of the card, from 0-5.
     */elevation:{type:Number,value:1,reflectToAttribute:!0},/**
     * Set this to true to animate the card shadow when setting a new
     * `z` value.
     */animatedShadow:{type:Boolean,value:!1},/**
     * Read-only property used to pass down the `animatedShadow` value to
     * the underlying paper-material style (since they have different names).
     */animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:"_computeAnimated(animatedShadow)"}},/**
   * Format function for aria-hidden. Use the ! operator results in the
   * empty string when given a falsy value.
   */_isHidden:function _isHidden(image){return image?"false":"true"},_headingChanged:function _headingChanged(heading){var currentHeading=this.getAttribute("heading"),currentLabel=this.getAttribute("aria-label");if("string"!==typeof currentLabel||currentLabel===currentHeading){this.setAttribute("aria-label",heading)}},_computeHeadingClass:function _computeHeadingClass(image){return image?" over-image":""},_computeAnimated:function _computeAnimated(animatedShadow){return animatedShadow}});var BookSlot=/*#__PURE__*/function(_PolymerElement){babelHelpers.inherits(BookSlot,_PolymerElement);function BookSlot(){babelHelpers.classCallCheck(this,BookSlot);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(BookSlot).apply(this,arguments))}babelHelpers.createClass(BookSlot,[{key:"ready",value:function ready(){var _this=this;babelHelpers.get(babelHelpers.getPrototypeOf(BookSlot.prototype),"ready",this).call(this);var doctorDetails=JSON.parse(sessionStorage.getItem("selectedDoctor")),doctorName=doctorDetails.doctorName,doctorId=doctorDetails.doctorId;this.doctorName=doctorName;this.doctorId=doctorId;this.addEventListener("ajax-response",function(e){return _this._slotsList(e)});this.addEventListener("book-slot",function(e){return _this._confirmationMessage(e)});this.$.ajax._makeAjaxCall("get","".concat(baseUrl,"/cureme/slots/doctors/").concat(doctorId,"/availableslots"),null,"ajaxResponse")}},{key:"_checkAvailability",value:function _checkAvailability(slot){if("AVAILABLE"==slot){return!0}}},{key:"_handleBack",value:function _handleBack(){this.set("route.path","./patient-home")}},{key:"_confirmationMessage",value:function _confirmationMessage(event){this.hide=!0;console.log(event.detail.data.message);this.message=event.detail.data.message;// this.$.toast.open();
}},{key:"_handleRoute",value:function _handleRoute(){this.$.modal.close();this.set("route.path","/patient-home")}},{key:"_slotsList",value:function _slotsList(event){this.slotDetails=event.detail.data.availableDates}},{key:"_handleBook",value:function _handleBook(event){var details=event.model.slot;this.slotTime=details.slotTime;this.$.slotSelected.innerHTML=this.slotTime;this.$.modal.open();this.slotDate=event.target.dataset.set;this.slotId=details.slotId}},{key:"_handleSubmit",value:function _handleSubmit(){var mobileNumber=this.$.mobileNo.value,emailId=this.$.mail.value,disease=this.$.disease.value,postObj={disease:disease,doctorId:this.doctorId,emailId:emailId,mobileNumber:mobileNumber,slotDate:this.slotDate,slotId:this.slotId,slotTime:this.slotTime};console.log(postObj);this.$.ajax._makeAjaxCall("post","".concat(baseUrl,"/cureme/users/bookslot"),postObj,"bookSlot")}}],[{key:"template",get:function get(){return(0,_cureMe.html$1)(_templateObject3_942974904e2611ea968e0b510ccc7207())}},{key:"properties",get:function get(){return{prop1:{type:String,value:"book-slot"},doctorName:{type:String,value:""},slotDetails:{type:Array,value:[{slotDate:"02-09-19",slots:[{slotId:424,slotTime:"10:30 to 11:00",availableStatus:"available"},{slotId:424,slotTime:"10:30 to 11:00",availableStatus:"available"}]},{slotDate:"02-09-19",slots:[{slotId:424,slotTime:"10:30 to 11:00",availableStatus:"available"}]}]},slotTime:{type:String,value:""},slotDate:{type:String,value:""},slotId:{type:Number,value:0},doctorId:{type:Number,value:0},hide:{type:Boolean,value:!1}}}}]);return BookSlot}(_cureMe.PolymerElement);window.customElements.define("book-slot",BookSlot)});